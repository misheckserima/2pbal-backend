function re(o,s){for(var c=0;c<s.length;c++){const u=s[c];if(typeof u!="string"&&!Array.isArray(u)){for(const l in u)if(l!=="default"&&!(l in o)){const f=Object.getOwnPropertyDescriptor(u,l);f&&Object.defineProperty(o,l,f.get?f:{enumerable:!0,get:()=>u[l]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}function oe(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function ne(o){if(o.__esModule)return o;var s=o.default;if(typeof s=="function"){var c=function u(){if(this instanceof u){var l=[null];l.push.apply(l,arguments);var f=Function.bind.apply(s,l);return new f}return s.apply(this,arguments)};c.prototype=s.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(o).forEach(function(u){var l=Object.getOwnPropertyDescriptor(o,u);Object.defineProperty(c,u,l.get?l:{enumerable:!0,get:function(){return o[u]}})}),c}var ae={exports:{}};(function(o){var s=function(c){var u=Object.prototype,l=u.hasOwnProperty,f,_=typeof Symbol=="function"?Symbol:{},w=_.iterator||"@@iterator",m=_.asyncIterator||"@@asyncIterator",F=_.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch{d=function(t,e,r){return t[e]=r}}function T(t,e,r,i){var n=e&&e.prototype instanceof j?e:j,g=Object.create(n.prototype),b=new p(i||[]);return g._invoke=V(t,r,b),g}c.wrap=T;function R(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(i){return{type:"throw",arg:i}}}var L="suspendedStart",A="suspendedYield",G="executing",O="completed",P={};function j(){}function S(){}function x(){}var U={};d(U,w,function(){return this});var I=Object.getPrototypeOf,D=I&&I(I(h([])));D&&D!==u&&l.call(D,w)&&(U=D);var C=x.prototype=j.prototype=Object.create(U);S.prototype=x,d(C,"constructor",x),d(x,"constructor",S),S.displayName=d(x,F,"GeneratorFunction");function Y(t){["next","throw","return"].forEach(function(e){d(t,e,function(r){return this._invoke(e,r)})})}c.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===S||(e.displayName||e.name)==="GeneratorFunction":!1},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,F,"GeneratorFunction")),t.prototype=Object.create(C),t},c.awrap=function(t){return{__await:t}};function M(t,e){function r(g,b,v,E){var k=R(t[g],t,b);if(k.type==="throw")E(k.arg);else{var Z=k.arg,W=Z.value;return W&&typeof W=="object"&&l.call(W,"__await")?e.resolve(W.__await).then(function(N){r("next",N,v,E)},function(N){r("throw",N,v,E)}):e.resolve(W).then(function(N){Z.value=N,v(Z)},function(N){return r("throw",N,v,E)})}}var i;function n(g,b){function v(){return new e(function(E,k){r(g,b,E,k)})}return i=i?i.then(v,v):v()}this._invoke=n}Y(M.prototype),d(M.prototype,m,function(){return this}),c.AsyncIterator=M,c.async=function(t,e,r,i,n){n===void 0&&(n=Promise);var g=new M(T(t,e,r,i),n);return c.isGeneratorFunction(e)?g:g.next().then(function(b){return b.done?b.value:g.next()})};function V(t,e,r){var i=L;return function(n,g){if(i===G)throw new Error("Generator is already running");if(i===O){if(n==="throw")throw g;return y()}for(r.method=n,r.arg=g;;){var b=r.delegate;if(b){var v=q(b,r);if(v){if(v===P)continue;return v}}if(r.method==="next")r.sent=r._sent=r.arg;else if(r.method==="throw"){if(i===L)throw i=O,r.arg;r.dispatchException(r.arg)}else r.method==="return"&&r.abrupt("return",r.arg);i=G;var E=R(t,e,r);if(E.type==="normal"){if(i=r.done?O:A,E.arg===P)continue;return{value:E.arg,done:r.done}}else E.type==="throw"&&(i=O,r.method="throw",r.arg=E.arg)}}}function q(t,e){var r=t.iterator[e.method];if(r===f){if(e.delegate=null,e.method==="throw"){if(t.iterator.return&&(e.method="return",e.arg=f,q(t,e),e.method==="throw"))return P;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var i=R(r,t.iterator,e.arg);if(i.type==="throw")return e.method="throw",e.arg=i.arg,e.delegate=null,P;var n=i.arg;if(!n)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P;if(n.done)e[t.resultName]=n.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=f);else return n;return e.delegate=null,P}Y(C),d(C,F,"Generator"),d(C,w,function(){return this}),d(C,"toString",function(){return"[object Generator]"});function z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function a(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(z,this),this.reset(!0)}c.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}};function h(t){if(t){var e=t[w];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(l.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=f,n.done=!0,n};return i.next=i}}return{next:y}}c.values=h;function y(){return{value:f,done:!0}}return p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(a),!t)for(var e in this)e.charAt(0)==="t"&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=f)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(E,k){return g.type="throw",g.arg=t,e.next=E,k&&(e.method="next",e.arg=f),!!k}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],g=n.completion;if(n.tryLoc==="root")return r("end");if(n.tryLoc<=this.prev){var b=l.call(n,"catchLoc"),v=l.call(n,"finallyLoc");if(b&&v){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(b){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else if(v){if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&l.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&(t==="break"||t==="continue")&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var g=n?n.completion:{};return g.type=t,g.arg=e,n?(this.method="next",this.next=n.finallyLoc,P):this.complete(g)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),P},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),a(r),P}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if(i.type==="throw"){var n=i.arg;a(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:h(t),resultName:e,nextLoc:r},this.method==="next"&&(this.arg=f),P}},c}(o.exports);try{regeneratorRuntime=s}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}})(ae);var ie={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}},ce=(o,s)=>{const c=o._malloc(s.length*Uint32Array.BYTES_PER_ELEMENT);return s.forEach((u,l)=>{const f=o.lengthBytesUTF8(u)+1,_=o._malloc(f);o.stringToUTF8(u,_,f),o.setValue(c+Uint32Array.BYTES_PER_ELEMENT*l,_,"i32")}),[s.length,c]};const se="0.11.6",le={"@ffmpeg/core":"^0.11.0"},X={version:se,devDependencies:le},fe=`https://unpkg.com/@ffmpeg/core@${X.devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`,ue={corePath:fe};let K=!1,H=()=>{};const pe=o=>{K=o},he=o=>{H=o},ge=(o,s)=>{H({type:o,message:s}),K&&console.log(`[${o}] ${s}`)};var $={logging:K,setLogging:pe,setCustomLogger:he,log:ge};const me=o=>`
createFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${o}. Use another URL when calling createFFmpeg():

const ffmpeg = createFFmpeg({
  corePath: 'http://localhost:3000/ffmpeg-core.js',
});
`;var Q={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:me};const B=async(o,s)=>{$.log("info",`fetch ${o}`);const c=await(await fetch(o)).arrayBuffer();$.log("info",`${o} file size = ${c.byteLength} bytes`);const u=new Blob([c],{type:s}),l=URL.createObjectURL(u);return $.log("info",`${o} blob URL = ${l}`),l},de=async({corePath:o,workerPath:s,wasmPath:c})=>{if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){if(typeof o!="string")throw Error("corePath should be a string!");const w=new URL(o,import.meta.url).href,m=await B(w,"application/javascript"),F=await B(c!==void 0?c:w.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),d=await B(s!==void 0?s:w.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(T=>{if(globalThis.importScripts(m),typeof createFFmpegCore>"u")throw Error(Q.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(w));$.log("info","ffmpeg-core.js script loaded"),T({createFFmpegCore,corePath:m,wasmPath:F,workerPath:d})}):($.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:m,wasmPath:F,workerPath:d}))}if(typeof o!="string")throw Error("corePath should be a string!");const u=new URL(o,import.meta.url).href,l=await B(u,"application/javascript"),f=await B(c!==void 0?c:u.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),_=await B(s!==void 0?s:u.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(w=>{const m=document.createElement("script"),F=()=>{if(m.removeEventListener("load",F),typeof createFFmpegCore>"u")throw Error(Q.CREATE_FFMPEG_CORE_IS_NOT_DEFINED(u));$.log("info","ffmpeg-core.js script loaded"),w({createFFmpegCore,corePath:l,wasmPath:f,workerPath:_})};m.src=l,m.type="text/javascript",m.addEventListener("load",F),document.getElementsByTagName("head")[0].appendChild(m)}):($.log("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:l,wasmPath:f,workerPath:_}))},ye=o=>new Promise((s,c)=>{const u=new FileReader;u.onload=()=>{s(u.result)},u.onerror=({target:{error:{code:l}}})=>{c(Error(`File could not be read! Code=${l}`))},u.readAsArrayBuffer(o)}),we=async o=>{let s=o;return typeof o>"u"?new Uint8Array:(typeof o=="string"?/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(o)?s=atob(o.split(",")[1]).split("").map(c=>c.charCodeAt(0)):s=await(await fetch(new URL(o,import.meta.url).href)).arrayBuffer():(o instanceof File||o instanceof Blob)&&(s=await ye(o)),new Uint8Array(s))},ve=Object.freeze(Object.defineProperty({__proto__:null,defaultOptions:ue,fetchFile:we,getCreateFFmpegCore:de},Symbol.toStringTag,{value:"Module"})),ee=ne(ve),{defaultArgs:Fe,baseOptions:be}=ie,Ee=ce,{defaultOptions:_e,getCreateFFmpegCore:Pe}=ee,{version:je}=X,J=Error("ffmpeg.wasm is not ready, make sure you have completed load().");var Le=(o={})=>{const{log:s,logger:c,progress:u,...l}={...be,..._e,...o};let f=null,_=null,w=null,m=null,F=!1,d=()=>{},T=s,R=u,L=0,A=0,G=!1,O=0;const P=a=>{a==="FFMPEG_END"&&w!==null&&(w(),w=null,m=null,F=!1)},j=(a,p)=>{d({type:a,message:p}),T&&console.log(`[${a}] ${p}`)},S=a=>{const[p,h,y]=a.split(":");return parseFloat(p)*60*60+parseFloat(h)*60+parseFloat(y)},x=(a,p)=>{if(typeof a=="string")if(a.startsWith("  Duration")){const h=a.split(", ")[0].split(": ")[1],y=S(h);p({duration:y,ratio:O}),(L===0||L>y)&&(L=y,G=!0)}else if(G&&a.startsWith("    Stream")){const h=a.match(/([\d.]+) fps/);if(h){const y=parseFloat(h[1]);A=L*y}else A=0;G=!1}else if(a.startsWith("frame")||a.startsWith("size")){const h=a.split("time=")[1].split(" ")[0],y=S(h),t=a.match(/frame=\s*(\d+)/);if(A&&t){const e=parseFloat(t[1]);O=Math.min(e/A,1)}else O=y/L;p({ratio:O,time:y})}else a.startsWith("video:")&&(p({ratio:1}),L=0)},U=({type:a,message:p})=>{j(a,p),x(p,R),P(p)},I=async()=>{if(j("info","load ffmpeg-core"),f===null){j("info","loading ffmpeg-core");const{createFFmpegCore:a,corePath:p,workerPath:h,wasmPath:y}=await Pe(l);f=await a({mainScriptUrlOrBlob:p,printErr:t=>U({type:"fferr",message:t}),print:t=>U({type:"ffout",message:t}),locateFile:(t,e)=>{if(typeof window<"u"||typeof WorkerGlobalScope<"u"){if(typeof y<"u"&&t.endsWith("ffmpeg-core.wasm"))return y;if(typeof h<"u"&&t.endsWith("ffmpeg-core.worker.js"))return h}return e+t}}),_=f.cwrap(l.mainName||"proxy_main","number",["number","number"]),j("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.")},D=()=>f!==null,C=(...a)=>{if(j("info",`run ffmpeg command: ${a.join(" ")}`),f===null)throw J;if(F)throw Error("ffmpeg.wasm can only run one command at a time");return F=!0,new Promise((p,h)=>{const y=[...Fe,...a].filter(t=>t.length!==0);w=p,m=h,_(...Ee(f,y))})},Y=(a,...p)=>{if(j("info",`run FS.${a} ${p.map(h=>typeof h=="string"?h:`<${h.length} bytes binary file>`).join(" ")}`),f===null)throw J;{let h=null;try{h=f.FS[a](...p)}catch{throw Error(a==="readdir"?`ffmpeg.FS('readdir', '${p[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:a==="readFile"?`ffmpeg.FS('readFile', '${p[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return h}},M=()=>{if(f===null)throw J;m&&m("ffmpeg has exited"),F=!1;try{f.exit(1)}catch(a){j(a.message),m&&m(a)}finally{f=null,_=null,w=null,m=null}},V=a=>{R=a},q=a=>{d=a},z=a=>{T=a};return j("info",`use ffmpeg.wasm v${je}`),{setProgress:V,setLogger:q,setLogging:z,load:I,isLoaded:D,run:C,exit:M,FS:Y}};const Oe=Le,{fetchFile:xe}=ee;var te={createFFmpeg:Oe,fetchFile:xe};const Ce=oe(te),ke=re({__proto__:null,default:Ce},[te]);export{ke as i};
